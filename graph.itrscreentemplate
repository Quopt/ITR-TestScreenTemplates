{"_objectType":"ITSScreenTemplate","ID":"9b9fb9f9-5794-454c-5184-ef9dac1dc8b1","Description":"Graph","Explanation":"","Remarks":"","TemplateVariables":[{"_objectType":"ITSScreenTemplateVariable","ID":"2206e25c-4d9f-4c2c-00b2-c3dbf91a6035","variableName":"Name","description":"The name of the graph","defaultValue":"","variableType":"T"},{"_objectType":"ITSScreenTemplateVariable","ID":"b3db1080-ca26-4fd7-d0f1-17827bbec8f5","variableName":"Type","description":"The type of graph to generate","defaultValue":"radar|Radar,bar|Bar,horizontalBar|Horizontal bar,doughnut|Doughnut,pie|Pie,line|Line,polarArea|Polar","variableType":"L"},{"_objectType":"ITSScreenTemplateVariable","ID":"25f4863a-4194-4808-ae1f-3b51e3b63f0e","variableName":"Axis_min_value","description":"The minimum value the graph is initialised with","defaultValue":"0","variableType":"T"},{"_objectType":"ITSScreenTemplateVariable","ID":"75d088b2-1027-4ab2-f057-3fcaeea78a44","variableName":"Axis_max_value","description":"The maximum value the graph is initialised with","defaultValue":"100","variableType":"T"},{"_objectType":"ITSScreenTemplateVariable","ID":"ad16dc0b-d5da-43d0-96d1-a2c64c450fbb","variableName":"Show_legend","description":"Show the legend in the graph ","defaultValue":"T","variableType":"B"},{"_objectType":"ITSScreenTemplateVariable","ID":"c50045fd-94a8-4f62-fb3f-0a32bfef4a27","variableName":"Pre_graph_script","description":"","defaultValue":"","variableType":"A"},{"_objectType":"ITSScreenTemplateVariable","ID":"ea21ac13-0c14-4a55-1842-52784491956f","variableName":"Series_labels","description":"A comma seperated list of label names","defaultValue":"","variableType":"T"},{"_objectType":"ITSScreenTemplateVariable","ID":"d248a6ff-b950-4201-e7c6-62e97d4b60a9","variableName":"Series_data","description":"A comma seperated list of numeric values","defaultValue":"","variableType":"T"},{"_objectType":"ITSScreenTemplateVariable","ID":"6bdc4beb-bfc6-4121-76b7-0ddd027f7baa","variableName":"Series_color_start","description":"The color of this series","defaultValue":"EEEEEE","variableType":"C"},{"_objectType":"ITSScreenTemplateVariable","ID":"8ffeaca7-3a00-4784-0493-a0ece20762d1","variableName":"Series_name","description":"The name of this series","defaultValue":"","variableType":"T"},{"_objectType":"ITSScreenTemplateVariable","ID":"19af469c-9df4-4d24-e28f-700c0e83c43c","variableName":"Height","description":"","defaultValue":"200px","variableType":"T"},{"_objectType":"ITSScreenTemplateVariable","ID":"7829a7a0-236a-4a1a-1eac-9e9866c62888","variableName":"Width","description":"","defaultValue":"200px","variableType":"T"},{"_objectType":"ITSScreenTemplateVariable","ID":"18a6ed75-d4a7-4825-ba32-4eebfdc8d4b9","variableName":"Series_type","description":"If the series is of another type then the graph override it here, In general only bar and line types can be mixed.","defaultValue":"|None,radar|Radar,bar|Bar,doughnut|Doughnut,pie|Pie,line|Line,polarArea|Polar","variableType":"L"},{"_objectType":"ITSScreenTemplateVariable","ID":"7fc268b8-bf68-486d-d765-c3c689ab4e95","variableName":"Series_color_end","description":"","defaultValue":"AAAAAA","variableType":"C"},{"_objectType":"ITSScreenTemplateVariable","ID":"4713efff-9a20-4dda-bc52-a5bbfe8cb6bd","variableName":"Series_fill","description":"","defaultValue":"F","variableType":"B"},{"_objectType":"ITSScreenTemplateVariable","ID":"46181ecc-a40f-4b87-86ba-47372c9eed8a","variableName":"Stacked","description":"If stack groups are present (and only on line and bar charts) stacking can be switched on","defaultValue":"F","variableType":"B"},{"_objectType":"ITSScreenTemplateVariable","ID":"a57cbe44-5094-494a-e7bc-827500ac604a","variableName":"StackGroup","description":"The stack group name","defaultValue":"","variableType":"T"}],"HTMLContent":"<div id=\"%%ID%%\" style=\"height:%%Height%%; width:%%Width%%;\"></div>\n<!--REPEATBLOCK-->\n<!-- %%Series_name%% -->\n<!--%%Series_data%%-->\n<!-- %%Series_color_start%% -->\n<!-- %%Series_color_end%% -->\n<!-- %%Series_type%% -->\n<!-- %%Series_fill%% -->\n<!-- %%StackGroup%% -->\n<!--REPEATBLOCK-->\n","HTMLContentPnP":"","get_value_snippet":"","set_value_snippet":"","TemplateType":0,"init_value_snippet":"//console.log(id, num_blocks, test_mode, template_values);\nvar elementID = 'canvas' +id;\n\n$('<canvas>').attr({\n        id: elementID\n    }).css({\n        width: '100%',\n        height: '100%'\n    }).appendTo('#'+id);\nvar canvas = document.getElementById(elementID);\nvar ctx = canvas.getContext('2d');\n\nif (template_values.Pre_graph_script != \"\") {\ntry { eval(template_values.Pre_graph_script); } catch(err) { console.log('Pre script on graph failed : ' + err.message); }\n}\n\nvar dsets=[];\nvar dsetpostfix = \"\";\nvar start =0;\nvar end =0;\nvar increment =0;\nfor (var i=1; i<=template_values.RepeatBlockCount; i++){\n var dsetentry = {};\n if (i>1) dsetpostfix = \"_\"+i;\n dsetentry[\"label\"] = template_values[\"Series_name\"+dsetpostfix];\n dsetentry[\"stack\"] = template_values[\"StackGroup\"+dsetpostfix];\n dsetentry[\"data\"] = template_values[\"Series_data\"+dsetpostfix].split(\",\");\n dsetentry[\"backgroundColor\"] = [];\n dsetentry[\"backgroundColor\"].length = dsetentry[\"data\"].length;\n dsetentry[\"borderColor\"] = [];\n dsetentry[\"borderColor\"].length = dsetentry[\"data\"].length;\n dsetentry[\"pointBackgroundColor\"] = [];\n dsetentry[\"pointBackgroundColor\"].length = dsetentry[\"data\"].length;\n dsetentry[\"pointBorderColor\"] = [];\n dsetentry[\"pointBorderColor\"].length = dsetentry[\"data\"].length;\n dsetentry[\"pointBorderColor\"].fill(\"#\"+template_values[\"Series_color_start\"+dsetpostfix]); \n dsetentry[\"borderColor\"].fill(\"#\"+template_values[\"Series_color_start\"+dsetpostfix]);\n dsetentry[\"fill\"] = template_values[\"Series_fill\"+dsetpostfix] == \"T\";\n \n start = RGBstringToNumber(template_values[\"Series_color_start\"+dsetpostfix]);\n end = RGBstringToNumber(template_values[\"Series_color_end\"+dsetpostfix]);\n increment = (end - start) / (dsetentry[\"data\"].length-1);\n for (var j=0; j < dsetentry[\"data\"].length; j++ ){ \n   dsetentry[\"backgroundColor\"][j] = \"#\" + RGBnumberToColour(start);\n   dsetentry[\"pointBackgroundColor\"][j] = \"#\" + RGBnumberToColour(start);\n   start = start + increment;\n }\n\n dsetentry[\"pointBorderWidth\"] = 1;\n dsetentry[\"BorderWidth\"] = 2;\n if (template_values[\"Series_type\"+dsetpostfix] != \"\") dsetentry[\"type\"] = template_values[\"Series_type\"+dsetpostfix]; \n dsets.push(dsetentry);\n}\n//console.log(dsets);\n\nvar myChart = new Chart(ctx , {\n    type: template_values.Type,\n    data: {\n        labels: template_values.Series_labels.split(\",\"),\n        datasets: dsets\n    },\n    options: {\n        scales: {\n            xAxes: [{\n                stacked: template_values.Stacked == \"T\"\n            }],\n            yAxes: [{\n                stacked: template_values.Stacked == \"T\",\n                ticks: {\n                    beginAtZero:true,\n\t\t\t\t\tmin: parseInt(template_values.Axis_min_value), \n\t\t\t\t\tmax: parseInt(template_values.Axis_max_value)\n                }\n            }]\n        },\n        legend: {\n            display: (template_values.Show_legend==\"T\")        }\n    }\n});\n","generator_snippet":"","generator_pnp_snippet":"","validation_snippet":"","isanswered_snippet":"return true;","PluginData":{"_objectType":"ITSObject","persistentProperties":"*ALL*"}}